@page "/cafedra/create"
@using System.Text.Json
@using System.Text.Json.Serialization
@using System.Net.Http
@using System.Net.Http.Json
@using Front.Components.Model
@using Microsoft.AspNetCore.Antiforgery;
@inject HttpClient Http
@inject IConfiguration Config
@inject IHttpClientFactory ClientFactory
@attribute [RequireAntiforgeryToken]

<h1>Create cafedra</h1>

<form method="post" @onsubmit="Submit" @formname="createCafedraForm">
    <label>
        Name: 
        <InputText @bind-Value="name"/>
    </label>
    <label>
        Description: 
        <InputText @bind-Value="description"/>
    </label>
    <input type="submit" value="Submit" />
    <AntiforgeryToken />
</form>
<p>@prevname</p>
@code {
    private string? name;
    private string? prevname;
    private string? description;
    private string? serviceEndpoint;

    protected override async Task OnInitializedAsync()
    {
        serviceEndpoint = $"{Config.GetValue<string>("BackendUrl")}/";
    }

    private async Task Submit ()
    {
        // if (!string.IsNullOrEmpty(name) && !string.IsNullOrEmpty(description))
        // {
            var response = await Http.PostAsJsonAsync("https://localhost:7264/api/cafedra/", new { name = name, description = description });
            prevname = name;
        // }
    }
}
